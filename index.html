<!DOCTYPE html>
<html>
  <head>
    <title>Проект "Комменты"</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="container">
      <ul class="comments">
        <li class="comment">
          <div class="comment-header">
            <div>Глеб Фокин</div>
            <div>12.02.22 12:18</div>
          </div>
          <div class="comment-body">
            <div class="comment-text">
              Это будет первый комментарий на этой странице
            </div>
          </div>
          <div class="comment-footer">
            <div class="likes">
              <span class="likes-counter">3</span>
              <button class="like-button"></button>
            </div>
          </div>
        </li>
        <li class="comment">
          <div class="comment-header">
            <div>Варвара Н.</div>
            <div>13.02.22 19:22</div>
          </div>
          <div class="comment-body">
            <div class="comment-text">
              Мне нравится как оформлена эта страница! ❤
            </div>
          </div>
          <div class="comment-footer">
            <div class="likes">
              <span class="likes-counter">75</span>
              <button class="like-button -active-like"></button>
            </div>
          </div>
        </li>
      </ul>
      <div class="add-form">
        <input
          type="text"
          class="add-form-name"
          placeholder="Введите ваше имя"
        />
        <textarea
          type="textarea"
          class="add-form-text"
          placeholder="Введите ваш коментарий"
          rows="4"
        ></textarea>
        <div class="add-form-row">
          <button class="add-form-button">Написать</button>
        </div>
      </div>
    </div>
  </body>

  <script>
    
  // Получаем ссылки на необходимые элементы
  const addButton = document.querySelector('.add-form-button');
  const nameInput = document.querySelector('.add-form-name');
  const commentInput = document.querySelector('.add-form-text');
  const commentsList = document.querySelector('.comments');

  // Обработчик события на кнопке «Написать»
  addButton.addEventListener('click', function() {
    // Получаем значения полей «Имя» и «Комментарий»
    const name = nameInput.value.trim();
    const comment = commentInput.value.trim();

    // Проверяем, что поля не пустые
    if (name === '' || comment === '') {
      alert('Поля "Имя" и "Комментарий" должны быть заполнены!');
      return;
    }

    // Создаем новый элемент списка комментариев
    const newComment = document.createElement('li');
    newComment.className = 'comment';

    const header = document.createElement('div');
    header.className = 'comment-header';

    const nameDiv = document.createElement('div');
    nameDiv.textContent = name;
    header.appendChild(nameDiv);

    const dateDiv = document.createElement('div');
    const now = new Date();
    dateDiv.textContent = `${now.getDate()}.${now.getMonth() + 1}.${now.getFullYear()} ${now.getHours()}:${now.getMinutes()}`;
    header.appendChild(dateDiv);

    newComment.appendChild(header);

    const body = document.createElement('div');
    body.className = 'comment-body';

    const textDiv = document.createElement('div');
    textDiv.className = 'comment-text';
    textDiv.textContent = comment;
    body.appendChild(textDiv);

    newComment.appendChild(body);

    const footer = document.createElement('div');
    footer.className = 'comment-footer';

    const likes = document.createElement('div');
    likes.className = 'likes';

    const likesCounter = document.createElement('span');
    likesCounter.className = 'likes-counter';
    likesCounter.textContent = 0;
    likes.appendChild(likesCounter);

    const likeButton = document.createElement('button');
    likeButton.className = 'like-button';
    likes.appendChild(likeButton);

    footer.appendChild(likes);

    newComment.appendChild(footer);

    // Добавляем новый элемент в список комментариев
    commentsList.appendChild(newComment);

    // Очищаем поля формы
    nameInput.value = '';
    commentInput.value = '';
  });

  const likeButtons = document.querySelectorAll('.like-button');

  // Добавляем обработчик событий на каждую кнопку лайка
  likeButtons.forEach(function(likeButton) {
    const likesCounter = likeButton.previousElementSibling;
    likeButton.addEventListener('click', function() {
      toggleLike(likeButton, likesCounter);
    });
  });

  // Функция для переключения лайка и обновления счетчика лайков
  function toggleLike(button, counter) {
    button.classList.toggle('-active-like');
    const count = parseInt(counter.textContent);
    if (button.classList.contains('-active-like')) {
      counter.textContent = count + 1;
    } else {
      counter.textContent = count - 1;
    }
  }
  
</script>

  
</html>